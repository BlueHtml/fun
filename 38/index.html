<!DOCTYPE html>
<html lang="zh-CN">
  
  <head>
    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" name="viewport" />
    <title> 在线二维码生成、解密 </title>
    <meta name="keywords" content="二维码生成,二维码解密" />
    <meta name="description" content="在线生成二维码,在线解密二维码">
    <!-- Site CSS -->
    <script src="./cdn.staticfile.org/jquery/1.9.1/jquery.min.js"></script>
    <link href="./cdn.staticfile.org/twitter-bootstrap/3.3.4/css/bootstrap.min.css" rel="stylesheet">
    <script src="./cdn.staticfile.org/twitter-bootstrap/3.3.4/js/bootstrap.min.js"></script>
    <link href="./static/3part/layer2/theme/default/layer.css" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="./static/css/global.css" />
    <script src="./static/bejson/common/global.js?20180929"></script>
    <script src="./cdn.staticfile.org/clipboard.js/1.7.1/clipboard.min.js"></script>
    <script>var NewVer = 201901092;</script></head>
  
  <body>
    <div class="aw-container-wrap">
      <div class="container">
        <div class="row">
          <div class="aw-content-wrap clearfix">
            <div class=" aw-main-content" style="min-height:700px;max-height:2000px">
              <nav class="navbar navbar-default" id='top_menu'>
                <div class="container-fluid">
                  <div style="clear:both"></div>
                  <style>.a2016{ color: white; font-family:"Microsoft YaHei",微软雅黑,"MicrosoftJhengHei",华文细黑,STHeiti,MingLiu ; text-align: center; background: red; border-radius: 2px; } .touxiang{ height: 20px; line-height: 45px; }</style>
                  <!-- content st -->

                  <style>textarea { resize: none; width: 100%; } button { margin: 0; } .help-block em{display:inline-block;width:10em;font-weight:bold;font-style:normal;} .file { position: relative; display: inline-block; background: #D0EEFF; border: 1px solid #99D3F5; border-radius: 4px; padding: 4px 12px; overflow: hidden; color: #1E88C7; text-decoration: none; text-indent: 0; line-height: 20px; } .file input { position: absolute; font-size: 100px; right: 0; top: 0; opacity: 0; } .file:hover { background: #AADFFD; border-color: #78C3F3; color: #004974; text-decoration: none; }</style>
                  <link rel="StyleSheet" type="text/css" href="./static/bejson/convert/qrcode/qrcodelib_default.css">
                  <script src="./cdn.bootcss.com/jquery/1.11.1/jquery.min.js"></script>
                  <script type="text/javascript" src="./static/bejson/convert/qrcode/qrcodelib_reedsolomon.js"></script>
                  <script type="text/javascript" src="./static/bejson/convert/qrcode/qrcodelib_qrbase.js"></script>
                  <script type="text/javascript" src="./static/bejson/convert/qrcode/qrcodelib_decode.js"></script>
                  <script type="text/javascript" src="./static/bejson/convert/qrcode/qrcodelib_qrdecode.js"></script>
                  <script type="text/javascript" src="./static/bejson/convert/qrcode/qrcodelib_encode.js"></script>
                  <script type="text/javascript" src="./static/bejson/convert/qrcode/qrcodelib_qrcode.js"></script>
                  <script type="text/javascript" src="./static/bejson/convert/qrcode/qrcodelib_render.table.js"></script>
                  <script type="text/javascript" src="./static/bejson/convert/qrcode/qrcodelib_render.canvas.js"></script>
                  <script type="text/javascript" src="./static/bejson/convert/qrcode/qrcodelib_render.em.js"></script>
                  <div class="panel panel-default">
                    <div class="panel-heading">
                      <div class="media">
                        <div class="media-body">
                          <h4 class="media-heading">在线二维码生成、解密</h4>
                          <div id="desc1">在线生成二维码,在线解密二维码</div></div>
                      </div>
                    </div>
                    <div class="panel-body">
                      <!--内容块开始-->
                      <div class=" panel panel-default main">
                        <nav>
                          <ul class=" tabs">
                            <li class="selected ">编码</li>
                            <li>解码</li></ul>
                        </nav>
                        <ul class="content clearfix">
                          <li class="encode selected">
                            <p>输入文本：</p>
                            <div>
                              <textarea class="form-control" id="encode-text" style="height:60px"></textarea>
                            </div>
                            <div class="form-group" style="margin-top:10px">
                              <div class="col-lg-2">
                                <label>纠错等级：</label></div>
                              <div class="col-lg-3">
                                <select id="encode-eclevel" class="form-control" style="width:200px">
                                  <option value="1">Level L (7%)</option>
                                  <option value="0">Level M (15%)</option>
                                  <option value="3">Level Q (25%)</option>
                                  <option value="2" selected>Level H (30%)</option></select>
                              </div>
                              <div class="col-lg-2">
                                <label>编码方式：</label></div>
                              <div class="col-lg-3">
                                <select id="encode-mode" class="form-control" style="width:200px">
                                  <option value="4" selected>8bit</option>
                                  <option value="2">Alphanumeric</option>
                                  <option value="1">Numeric</option></select>
                              </div>
                            </div>
                            <br>
                            <br>
                            <div class="form-group" style="margin-top:10px">
                              <div class="col-lg-2">
                                <label>色块大小：</label></div>
                              <div class="col-lg-3">
                                <input id="encode-msize" type="number" min="1" max="10" value="5" class="form-control" style="width:200px" ./></div>
                              <div class="col-lg-2">
                                <label>留白大小：</label></div>
                              <div class="col-lg-3">
                                <input class="form-control" id="encode-margin" type="number" min="0" max="10" value="4" class="form-control" style="width:200px" ./></div>
                            </div>
                            <br>
                            <br>
                            <div class="form-group" style="margin-top:10px">
                              <div class="col-lg-2">
                                <label>前景色：</label></div>
                              <div class="col-lg-3">
                                <input class="form-control" type="color" value="#000000" id="encode-mcolor" style="width:200px" ./></div>
                              <div class="col-lg-2">
                                <label>背景色：</label></div>
                              <div class="col-lg-3">
                                <input class="form-control" type="color" value="#ffffff" id="encode-bgcolor " style="width:200px" ./></div>
                            </div>
                            <br>
                            <br>
                            <p style=" text-align:center">
                              <label>Logo 和 LogoUrl 选填一个：</label></p>
                            <div class="form-group">
                              <label class="col-lg-2 control-label">选择二维码图片：</label>
                              <div class="col-lg-3">
                                <input id="uploadFile" style="width:200px" type="text" class="form-control" disabled="disabled" placeholder="请选择文件" value=""></div>
                              <div class="col-lg-2">
                                <a href="javascript:;" class="file">
                                  <i class="glyphicon glyphicon-folder-open"></i>选择文件
                                  <input type="file" name="files[]" id="uploadBtn"></a></div>
                            </div>
                            <div>
                              <br>
                              <br>
                              <div class="form-group">
                                <div class="col-lg-2">
                                  <label>LogoUrl：</label></div>
                                <div class="col-lg-3">
                                  <input type="url" id="encode-logo" class="form-control" style="width:200px" ./></div>
                                <div class="col-lg-3">
                                  <button id="encode-logobtn" class="btn btn-success">加载Logo</button></div>
                              </div>
                              <div>
                                <canvas id="logo-canvas" style="top: 500px;"></canvas>
                              </div>
                              <br>
                              <br>
                              <div class="form-group">
                                <div class="col-lg-2">
                                  <label>渲染方式：</label></div>
                                <div class="col-lg-3">
                                  <select id="encode-render" class="form-control" style="width:200px">
                                    <option value="canvas" selected>Canvas</option>
                                    <option value="table">Table</option>
                                    <option value="em">Em</option></select>
                                </div>
                              </div>
                              <br>
                              <br>
                              <p style="text-align:center">
                                <button id="encode-btn" class="btn btn-info" style="width:200px">编码</button></p>
                              <div id="encode-canvas"></div>
                          </li>
                          <li class="decode">
                            <div class="form-group">
                              <label class="col-lg-2 control-label">选择二维码图片</label>
                              <div class="col-lg-3" style="margin-left:10px">
                                <input id="uploadFileDecode" type="text" class="form-control" disabled="disabled" placeholder="请选择文件" value=""></div>
                              <div class="col-lg-2">
                                <a href="javascript:;" class="file">
                                  <i class="glyphicon glyphicon-folder-open"></i>选择文件
                                  <input type="file" name="files[]" id="uploadBtnd"></a></div>
                            </div>
                            <div>
                              <canvas id="decode-canvas"></canvas>
                            </div>
                            <p>
                              <button id="decode-btn" class="btn btn-primary">解码</button></p>
                            <div style="text-align:center">
                              <label>解码值为</label></div>
                            <div style="text-align:center">
                              <textarea class="form-control" style="height:300px" id="decoderes" name="content" placeholder="解码内容...." data-bv-field="content"></textarea>
                            </div>
                          </li>
                        </ul>
                        </div>
                        <script type="text/javascript">function renderLogo(canvas, url) {
                            var img = new Image(),
                            ctx = canvas.getContext('2d'),
                            canvasSize = 200;

                            if (!url) {
                              ctx.fillStyle = 'rgb(255, 255, 255)';
                              ctx.fillRect(0, 0, canvasSize, canvasSize);

                              return;
                            }

                            img.onload = function() {
                              var imgSize, zoom, imgW = img.width,
                              imgH = img.height;

                              canvas.width = canvasSize;
                              canvas.height = canvasSize;

                              ctx.fillStyle = 'rgb(255, 255, 255)';
                              ctx.fillRect(0, 0, canvasSize, canvasSize);

                              imgSize = Math.max(imgW, imgH);

                              if (imgSize > canvasSize) {
                                zoom = canvasSize / imgSize;
                                imgW = imgW * zoom;
                                imgH = imgH * zoom;
                              }

                              ctx.drawImage(img, (canvasSize - imgW) / 2, (canvasSize - imgH) / 2, imgW, imgH);
                            };

                            img.src = url;
                          }

                          // Tab 切换
                          var nav = $('.tabs li'),
                          content = $('.content li');

                          nav.on('click',
                          function(e) {
                            nav.removeClass('selected');
                            $(this).addClass('selected');
                            content.removeClass('selected').eq($(this).index()).addClass('selected');
                          });

                          // Logo 加载（Url 方式）
                          $('#encode-logobtn').on('click',
                          function(e) {
                            var imgUrl = $('#encode-logo').val(),
                            canvas = $('#logo-canvas')[0];

                            $(canvas).data('logo', imgUrl);
                            renderLogo(canvas, imgUrl);
                          });

                          // 生成二维码
                          $('#encode-btn').on('click',
                          function() {
                            var config = {},
                            encodeCanvas = $('#encode-canvas');

                            config.text = $('#encode-text').val();
                            config.render = $('#encode-render').val();
                            config.bgColor = $('#encode-bgcolor').val();
                            config.moduleColor = $('#encode-mcolor').val();
                            config.moduleSize = $('#encode-msize').val();
                            config.mode = Number($('#encode-mode').val());
                            config.ECLevel = Number($('#encode-eclevel').val());
                            config.margin = Number($('#encode-margin').val());
                            config.logo = $('#logo-canvas').data('logo');
                            config.error = function(e) {
                              encodeCanvas.html('');
                              alert(e.message);
                              throw (e);
                            };

                            if (!config.text) {
                              alert("请输入文本");
                              return;
                            }

                            encodeCanvas.QREncode(config);
                          });

                          // 二维码加载
                          $('#decode-file').on('change',
                          function(e) {
                            var canvas = $('#decode-canvas')[0],
                            ctx = canvas.getContext('2d'),
                            file = e.target.files[0],
                            reader = new FileReader();

                            reader.onload = (function(e) {
                              var img = new Image();

                              img.onload = function() {
                                canvas.width = img.width;
                                canvas.height = img.height;
                                ctx.drawImage(img, 0, 0);
                              };

                              img.src = e.target.result;
                            });

                            file && reader.readAsDataURL(file);
                          });

                          $('#decode-btn').on('click',
                          function() {

                            var decodeText = $('#decode-text');
                            result = $('#decode-canvas').QRDecode(function(e) {
                              //$('#decode-text').hide();
                              $("#decoderes").val('');
                              alert(e.message);
                              throw e;
                            });

                            if (result) {
                              $('#decode-text').show();
                              $("#decoderes").val(result);
                            }
                          });
                          $(function() {
                            document.getElementById("uploadBtn").onchange = function(e) {
                              document.getElementById("uploadFile").value = this.value;
                              var canvas = $('#logo-canvas')[0],
                              file = e.target.files[0],
                              reader = new FileReader();
                              reader.onload = (function(e) {
                                $(canvas).data('logo', e.target.result);
                                renderLogo(canvas, e.target.result);
                              });

                              file && reader.readAsDataURL(file);
                            };

                            document.getElementById("uploadBtnd").onchange = function(e) {
                              document.getElementById("uploadFileDecode").value = this.value;
                              var canvas = $('#decode-canvas')[0],
                              ctx = canvas.getContext('2d'),
                              file = e.target.files[0],
                              reader = new FileReader();

                              reader.onload = (function(e) {
                                var img = new Image();

                                img.onload = function() {
                                  canvas.width = img.width;
                                  canvas.height = img.height;
                                  ctx.drawImage(img, 0, 0);
                                };

                                img.src = e.target.result;
                              });

                              file && reader.readAsDataURL(file);
                            };

                          })</script>
                        <!--内容块结束--></div>
                    <!-- content ed -->

                    <script src="./static/3part/layer2/layer2.js" type="text/javascript" charset="utf-8"></script>
                  </div>
                </div>
            </div>
          </nav>
        </div>
        <script src="./static/js/bejsoncommon.js?v=20170711"></script>
      </div>
      </div>
      </div>
      </div>
  </body>

</html>