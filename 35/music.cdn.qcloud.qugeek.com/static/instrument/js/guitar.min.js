!function(e){function n(e){this.el=e,this.strings=[].slice.call(this.el.querySelectorAll(".guitar__string-hover")),this.midiCode=24,this.openChords=!1,this.chords=[{name:"DMaj",scale:[0,0,0,2,3,2]},{name:"AMaj",scale:[0,0,2,2,2,0]},{name:"F#Maj",scale:[2,4,4,3,2,2]},{name:"A#Maj",scale:[0,1,3,3,3,1]},{name:"EMaj",scale:[0,2,2,1,0,0]},{name:"CMaj",scale:[0,3,2,0,1,0]},{name:"FMaj",scale:[1,3,3,2,1,1]},{name:"GMaj",scale:[3,2,0,0,0,3]},{name:"AMin",scale:[0,0,2,2,1,0]},{name:"BMaj",scale:[0,2,4,4,4,2]},{name:"DMin",scale:[0,0,0,2,3,1]},{name:"EMin",scale:[0,2,2,0,0,0]},{name:"FMin",scale:[1,3,3,1,1,1]},{name:"BMin",scale:[0,2,4,4,3,2]}],this.chordsTotal=this.chords.length,this.currentChord=0,this._initEvents()}n.prototype._initEvents=function(){var e=this,n=mobilecheck(),t={down:n?"touchstart":"mousedown",up:n?"touchend":"mouseup"};this.strings.forEach(function(o,a){o.addEventListener(t.down,function(t){e.mdown=!0,e._changeChord(t.pageX);var s=e._getNote(o,a);n||(e.mouseLeaveFn=function(n){e._play(s,"off"),this.removeEventListener("mouseleave",e.mouseLeaveFn)},o.addEventListener("mouseleave",e.mouseLeaveFn)),e._play(s,"on",o)}),o.addEventListener(t.up,function(t){if(!e.mdown&&!n)return!1;e.mdown=!1;var s=e._getNote(o,a);n||this.removeEventListener("mouseleave",e.mouseLeaveFn),e._play(s,"off")}),n||o.addEventListener("mouseenter",function(n){if(!e.mdown)return!1;var t=e._getNote(o,a);e.mouseLeaveFn=function(n){e._play(t,"off"),this.removeEventListener("mouseleave",e.mouseLeaveFn)},o.addEventListener("mouseleave",e.mouseLeaveFn),e._play(t,"on",o)})}),n||(this.el.addEventListener("mousedown",function(n){e.mdown||(e.mdown=!0,e._changeChord(n.pageX))}),this.el.addEventListener("mouseup",function(n){e.mdown=!1}),this.el.addEventListener("mouseleave",function(n){e.mdown=!1}))},n.prototype._changeChord=function(e){var n=Math.floor(e/(this.el.offsetWidth/this.chordsTotal));this.currentChord=n},n.prototype._getNote=function(e,n){var t;if(this.openChords)t=e.getAttribute("note:id");else{var o=this.chords[this.currentChord].scale[n];t=null!=o?parseInt(e.getAttribute("note:id"))+o:o}return t},n.prototype._play=function(e,n,t){e=parseInt(e)+21;MIDI.programChange(0,this.midiCode),"on"===n?(MIDI.noteOn(0,e,127,0),anime({targets:t.parentNode,duration:2600,easing:"easeOutElastic",elasticity:1e3,translateY:[-2,0]})):MIDI.noteOff(0,e,4)},e.Guitar=n}(window);