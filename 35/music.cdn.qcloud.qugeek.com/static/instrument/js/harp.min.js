!function(e){function t(e,t){this.el=e,this.strings=[].slice.call(this.el.querySelectorAll(".harp__string-hover")),this.midiCode=46,this._initEvents()}t.prototype._initEvents=function(){var e=this,t=mobilecheck(),n={down:t?"touchstart":"mousedown",up:t?"touchend":"mouseup"};this.strings.forEach(function(o,i){o.addEventListener(n.down,function(n){e.mdown=!0;var s=e._getNote(o,i);t||(e.mouseLeaveFn=function(t){e._play(s,"off"),this.removeEventListener("mouseleave",e.mouseLeaveFn)},o.addEventListener("mouseleave",e.mouseLeaveFn)),e._play(s,"on",o)}),o.addEventListener(n.up,function(n){if(!e.mdown&&!t)return!1;e.mdown=!1;var s=e._getNote(o,i);t||this.removeEventListener("mouseleave",e.mouseLeaveFn),e._play(s,"off")}),t||o.addEventListener("mouseenter",function(t){var n=e._getNote(o,i);if(!e.mdown||parseInt(n)===e.currentNote)return!1;e.mouseLeaveFn=function(t){e._play(n,"off"),this.removeEventListener("mouseleave",e.mouseLeaveFn)},o.addEventListener("mouseleave",e.mouseLeaveFn),e._play(n,"on",o)})}),t||(this.el.addEventListener("mousedown",function(t){e.mdown=!0}),this.el.addEventListener("mouseup",function(t){e.mdown=!1}),this.el.addEventListener("mouseleave",function(t){e.mdown=!1}))},t.prototype._getNote=function(e){return e.getAttribute("note:id")},t.prototype._play=function(e,t,n){e=parseInt(e)+21;if(MIDI.programChange(0,this.midiCode),"on"===t)this.currentNote=e-21,MIDI.noteOn(0,e,127,0),anime({targets:n.parentNode,duration:2600,easing:"easeOutElastic",elasticity:1e3,translateX:[-1,0]});else{var o=this;setTimeout(function(){o.currentNote=-1},100),MIDI.noteOff(0,e,4)}},e.Harp=t}(window);