!function(e){function t(e,t){this.el=e,this.options=extend({},this.options),extend(this.options,t),this.tubes=[].slice.call(this.el.querySelectorAll(".chime__pipe")),this.midiCode=14,this._initEvents()}t.prototype.options={triggeredOnHover:!1},t.prototype._initEvents=function(){var e=this,t=mobilecheck(),n={down:t?"touchstart":"mousedown",up:t?"touchend":"mouseup"};this.tubes.forEach(function(o){e.options.triggeredOnHover||(o.addEventListener(n.down,function(n){var i=e._getNote(o);e.mdown=!0,t||(e.mouseLeaveFn=function(t){e._play(i,"off"),this.removeEventListener("mouseleave",e.mouseLeaveFn)},o.addEventListener("mouseleave",e.mouseLeaveFn)),e._play(i,"on",o)}),o.addEventListener(n.up,function(n){if(!e.mdown&&!t)return!1;e.mdown=!1;var i=e._getNote(o);t||this.removeEventListener("mouseleave",e.mouseLeaveFn),e._play(i,"off")})),t||o.addEventListener("mouseenter",function(t){if(!e.mdown&&!e.options.triggeredOnHover)return!1;var n=e._getNote(o);e.mouseLeaveFn=function(t){e._play(n,"off"),this.removeEventListener("mouseleave",e.mouseLeaveFn)},o.addEventListener("mouseleave",e.mouseLeaveFn),e._play(n,"on",o)})}),t||e.options.triggeredOnHover||(this.el.addEventListener("mousedown",function(t){e.mdown=!0}),this.el.addEventListener("mouseup",function(t){e.mdown=!1}),this.el.addEventListener("mouseleave",function(t){e.mdown=!1}))},t.prototype._getNote=function(e){return e.getAttribute("note:id")},t.prototype._play=function(e,t,n){e=parseInt(e)+21;MIDI.programChange(0,this.midiCode),"on"===t?(MIDI.noteOn(0,e,127,0),anime({targets:n,duration:1500,easing:"easeOutElastic",elasticity:600,rotateZ:[-1.7,0]}),anime({targets:n.previousElementSibling,duration:1500,easing:"easeOutElastic",elasticity:600,rotateZ:[-6,0]})):MIDI.noteOff(0,e,4)},t.prototype.playSequence=function(e){for(var t=0,n=0,o=(e=e||[74,69,67,65,62]).length;n<=o-1;++n)MIDI.programChange(0,this.midiCode),MIDI.noteOn(0,e[n]+21,127,t),MIDI.noteOff(0,e[n]+21,127,t+4),t+=.05},e.Chimes=t}(window);